<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acesso Restrito - 1¬∫ Pelot√£o</title>
    <style>
        /* --- Cores e Tipografia Ex√©rcito --- */
        :root {
            --cor-fundo: #001f1a;      
            --cor-principal: #3f4f3f;  
            --cor-destaque: #f1c40f;   /* Amarelo/Dourado (Patente) */
            --cor-perigo: #c0392b;     /* Vermelho Escuro (Alerta/Falta) */
            --cor-texto: #ecf0f1;      
            --cor-borda: #1a3e36;
        }

        /* --- Estilos Gerais --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--cor-fundo);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        /* --- Estilo do Painel de Login --- */
        #login-panel {
            background-color: var(--cor-principal);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
            width: 90%;
            max-width: 350px;
            text-align: center;
            border: 2px solid var(--cor-destaque);
            color: var(--cor-texto);
        }
        
        #login-panel h2 {
            color: var(--cor-destaque);
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        #login-panel input[type="password"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid var(--cor-borda);
            border-radius: 4px;
            background-color: #2b3b2b;
            color: var(--cor-texto);
            font-size: 1.1em;
            text-align: center;
        }

        #login-panel button {
            background-color: var(--cor-perigo);
            color: var(--cor-texto);
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        #login-panel button:hover {
            background-color: #922b21;
        }

        #mensagem-erro {
            color: var(--cor-perigo);
            margin-top: 10px;
            font-weight: bold;
            display: none;
        }

        /* --- Estilos da P√°gina Principal (Conte√∫do da Chamadinha) --- */
        #chamadinha-principal {
            display: none; /* ESCONDIDO por padr√£o */
        }

        .chamadinha-container {
            /* Estilo da div principal (igual ao c√≥digo anterior) */
            background-color: var(--cor-principal);
            color: var(--cor-texto);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
            width: 100%;
            max-width: 600px; 
            text-align: center;
            border: 2px solid var(--cor-destaque);
        }

        /* --- Estilos da Tabela e Selects (mantidos para o conte√∫do principal) --- */
        .pelotao-titulo {
            font-size: 2.2em;
            color: var(--cor-destaque);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .slogan {
            font-size: 0.9em;
            color: #bdc3c7;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--cor-borda);
            padding-bottom: 8px;
        }
        .tabela-status {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 10px;
        }
        .tabela-status th {
            background-color: var(--cor-fundo);
            color: var(--cor-destaque);
            padding: 10px;
            text-transform: uppercase;
            font-size: 0.85em;
            font-weight: 700;
            text-align: left;
        }
        .tabela-status td {
            background-color: #2b3b2b;
            border-bottom: 1px solid var(--cor-borda);
            padding: 8px 10px;
            font-size: 0.95em;
            color: var(--cor-texto);
            vertical-align: middle;
            text-align: left;
        }
        .tabela-status td:nth-child(2) {
            background-color: var(--cor-principal);
            text-align: center;
        }
        .status-select {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            background-color: #34495e;
            color: var(--cor-texto);
            border: 1px solid var(--cor-destaque);
            appearance: none;
            font-size: 0.9em;
            cursor: pointer;
        }
        .relatorio-btn {
            background-color: var(--cor-perigo);
            color: var(--cor-texto);
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin-top: 20px;
            transition: background-color 0.3s;
            width: 100%;
        }
        #relatorio-output {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--cor-fundo);
            border-radius: 6px;
            text-align: left;
            border-left: 4px solid var(--cor-destaque);
            display: none;
            width: 100%;
        }
        #relatorio-output h3 {
            color: var(--cor-destaque);
            border-bottom: 1px solid var(--cor-borda);
            padding-bottom: 8px;
            margin-top: 0;
            font-size: 1.3em;
        }
        #relatorio-output .resumo-status {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        #relatorio-output .resumo-status div {
            padding: 10px;
            background-color: #1a3e36;
            border-radius: 4px;
            flex-grow: 1;
            min-width: 45%;
        }
        #relatorio-output .resumo-status div strong {
             color: var(--cor-destaque);
        }
        #relatorio-output ul {
            list-style-type: none;
            padding-left: 0;
        }
        #relatorio-output li {
            background-color: #4a1d1d; 
            padding: 5px;
            margin-bottom: 3px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="login-panel">
        <h2>üîí ACESSO RESTRITO</h2>
        <p>Apenas militares do 1¬∫ Pelot√£o.</p>
        <input type="password" id="senhaInput" placeholder="Digite a Senha">
        <button onclick="verificarSenha()">ACESSAR CHAMADINHA</button>
        <p id="mensagem-erro">‚õî Senha incorreta. Tente novamente.</p>
    </div>

    <div id="chamadinha-principal">
        <div class="chamadinha-container">
            <h1 class="pelotao-titulo">1¬∫ PELOT√ÉO</h1>
            <p class="slogan">üî• **REGISTRO DE STATUS DI√ÅRIO** | FOR√áA E HONRA üî•</p>
            
            <form id="status-form">
                <table class="tabela-status">
                    <thead>
                        <tr>
                            <th>Militar</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        </tbody>
                </table>
            </form>
            
            <button class="relatorio-btn" onclick="gerarRelatorio()">
                GERAR RELAT√ìRIO DE STATUS
            </button>

            <div id="relatorio-output">
                </div>
            
            <p style="margin-top: 15px; font-style: italic; color: #aaaaaa; font-size: 0.8em;">Prontid√£o Total.</p>
        </div>
    </div>

    <script>
        // Senha configurada
        const SENHA_CORRETA = "9090";

        // Vari√°veis globais para o conte√∫do da chamadinha
        const militares = [
            "SGT Marlon", "SGT Guimar√£es", "SGT G. Nascimento", 
            "CB Natan", "CB Brayan", "CB Siqueira", "CB Rodrigues Silva", 
            "CB Mossi", "CB Eric", "CB Abner Robalo", "CB Parahiba", 
            "CB Greff", "SD Dalongaro", "SD Gomes", "SD Elton", "SD Gediel"
        ];

        const statusOptions = [
             { value: "Presenca", label: "‚úÖ Presen√ßa" },
            { value: "Falta", label: "‚ùå Falta" },
            { value: "FaltaJustificada", label: "üü° Falta Justificada" },
            { value: "Ferias", label: "üîµ F√©rias" },
            { value: "Servico", label: "üü£ Em Servi√ßo" },
            { value: "SaindoServico", label: "üü¢ Saindo Servi√ßo" }
        ];

        // --- FUN√á√ÉO DE LOGIN ---
        function verificarSenha() {
            const senhaDigitada = document.getElementById('senhaInput').value;
            const loginPanel = document.getElementById('login-panel');
            const chamadinhaPrincipal = document.getElementById('chamadinha-principal');
            const mensagemErro = document.getElementById('mensagem-erro');

            if (senhaDigitada === SENHA_CORRETA) {
                // Senha correta: Esconde o login, mostra a chamadinha
                loginPanel.style.display = 'none';
                chamadinhaPrincipal.style.display = 'block';
                // Chama a fun√ß√£o para preencher o conte√∫do din√¢mico
                preencherTabela(); 
            } else {
                // Senha incorreta: Exibe mensagem de erro
                mensagemErro.style.display = 'block';
                document.getElementById('senhaInput').value = ''; // Limpa o campo
            }
        }

        // --- FUN√á√ÉO 1: Preenche a Tabela com Selects (Chamada ap√≥s o login) ---
        function preencherTabela() {
            const tbody = document.querySelector('.tabela-status tbody');
            let rowsHTML = '';

            militares.forEach(nomeCompleto => {
                const nomeCurto = nomeCompleto.replace(/[^a-zA-Z]/g, '').toLowerCase(); 
                let optionsHTML = '';

                statusOptions.forEach(status => {
                    const selectedAttr = (status.value === 'Presenca') ? 'selected' : ''; 
                    optionsHTML += `<option value="${status.value}" ${selectedAttr}>${status.label}</option>`;
                });
                
                rowsHTML += `
                    <tr>
                        <td>${nomeCompleto}</td>
                        <td>
                            <select name="status_${nomeCurto}" class="status-select">
                                ${optionsHTML}
                            </select>
                        </td>
                    </tr>
                `;
            });
            tbody.innerHTML = rowsHTML;
        }


        // --- FUN√á√ÉO 2: Gerar Relat√≥rio ---
        function gerarRelatorio() {
            const form = document.getElementById('status-form');
            const relatorioOutput = document.getElementById('relatorio-output');
            
            const contagem = {
                Presenca: 0,
                Falta: 0,
                FaltaJustificada: 0,
                Ferias: 0,
                Servico: 0,
                SaindoServico: 0
            };
            
            const faltasNomes = [];
            const formData = new FormData(form);
            
            for (let [name, status] of formData.entries()) {
                if (name.startsWith('status_')) {
                    contagem[status]++; 
                    
                    if (status === 'Falta') {
                        const nomeCurto = name.replace('status_', '');
                        // A fun√ß√£o .find procura o nome completo baseado na vers√£o "curta" e minuscula
                        const nomeCompleto = militares.find(n => n.replace(/[^a-zA-Z]/g, '').toLowerCase() === nomeCurto);
                        if (nomeCompleto) {
                            faltasNomes.push(nomeCompleto);
                        }
                    }
                }
            }

            // 2. Montar o relat√≥rio em HTML
            let relatorioHTML = '<h3>üìä Resumo da Chamada</h3>';
            
            relatorioHTML += '<div class="resumo-status">';
            relatorioHTML += `<div>‚úÖ **Presentes:** <strong>${contagem.Presenca}</strong></div>`;
            relatorioHTML += `<div>‚ùå **Faltas (Total):** <strong>${contagem.Falta}</strong></div>`;
            relatorioHTML += `<div>üü° **F. Justificadas:** <strong>${contagem.FaltaJustificada}</strong></div>`;
            relatorioHTML += `<div>üîµ **Em F√©rias:** <strong>${contagem.Ferias}</strong></div>`;
            relatorioHTML += `<div>üü£ **Em Servi√ßo:** <strong>${contagem.Servico}</strong></div>`;
            relatorioHTML += `<div>üü¢ **Saindo Serv.:** <strong>${contagem.SaindoServico}</strong></div>`;
            relatorioHTML += '</div>';
            
            if (faltasNomes.length > 0) {
                relatorioHTML += '<h4 style="color:var(--cor-perigo); margin-top: 20px;">üö® MILITARES FALTOSOS:</h4>';
                relatorioHTML += '<ul>' + faltasNomes.map(nome => `<li>${nome}</li>`).join('') + '</ul>';
            } else {
                 relatorioHTML += '<p style="color:#2ecc71; margin-top: 20px;">**NENHUMA FALTA REGISTRADA NO MOMENTO.**</p>';
            }

            relatorioOutput.innerHTML = relatorioHTML;
            relatorioOutput.style.display = 'block';
            
            relatorioOutput.scrollIntoView({ behavior: 'smooth' });
        }
    </script>

</body>
</html>
